{"ast":null,"code":"import { useContext, useMemo, useEffect } from 'react';\nimport { MapContext } from './map';\nexport default function useControl(onCreate, onRemove, opts) {\n  const context = useContext(MapContext);\n  const ctrl = useMemo(() => onCreate(context), []);\n  useEffect(() => {\n    var _a;\n    const {\n      map\n    } = context;\n    if (!map.hasControl(ctrl)) {\n      map.addControl(ctrl, (_a = opts || onRemove) === null || _a === void 0 ? void 0 : _a.position);\n    }\n    return () => {\n      if (typeof onRemove === 'function') {\n        onRemove(context);\n      }\n      // Map might have been removed (parent effects are destroyed before child ones)\n      if (map.hasControl(ctrl)) {\n        map.removeControl(ctrl);\n      }\n    };\n  }, []);\n  return ctrl;\n}","map":{"version":3,"names":["useContext","useMemo","useEffect","MapContext","useControl","onCreate","onRemove","opts","context","ctrl","map","hasControl","addControl","_a","position","removeControl"],"sources":["/Users/ericli/Desktop/pill2/node_modules/react-map-gl/src/components/use-control.ts"],"sourcesContent":["import {useContext, useMemo, useEffect} from 'react';\nimport type {IControl, ControlPosition} from '../types';\nimport {MapContext} from './map';\nimport type {MapContextValue} from './map';\n\ntype ControlOptions = {\n  position?: ControlPosition;\n};\n\nexport default function useControl<T extends IControl>(\n  onCreate: (context: MapContextValue) => T,\n  onRemove?: ((context: MapContextValue) => void) | ControlOptions,\n  opts?: ControlOptions\n) {\n  const context = useContext(MapContext);\n  const ctrl = useMemo(() => onCreate(context), []);\n\n  useEffect(() => {\n    const {map} = context;\n    if (!map.hasControl(ctrl)) {\n      map.addControl(ctrl, (opts || (onRemove as ControlOptions))?.position);\n    }\n\n    return () => {\n      if (typeof onRemove === 'function') {\n        onRemove(context);\n      }\n      // Map might have been removed (parent effects are destroyed before child ones)\n      if (map.hasControl(ctrl)) {\n        map.removeControl(ctrl);\n      }\n    };\n  }, []);\n\n  return ctrl;\n}\n"],"mappings":"AAAA,SAAQA,UAAU,EAAEC,OAAO,EAAEC,SAAS,QAAO,OAAO;AAEpD,SAAQC,UAAU,QAAO,OAAO;AAOhC,eAAc,SAAUC,UAAUA,CAChCC,QAAyC,EACzCC,QAAgE,EAChEC,IAAqB;EAErB,MAAMC,OAAO,GAAGR,UAAU,CAACG,UAAU,CAAC;EACtC,MAAMM,IAAI,GAAGR,OAAO,CAAC,MAAMI,QAAQ,CAACG,OAAO,CAAC,EAAE,EAAE,CAAC;EAEjDN,SAAS,CAAC,MAAK;;IACb,MAAM;MAACQ;IAAG,CAAC,GAAGF,OAAO;IACrB,IAAI,CAACE,GAAG,CAACC,UAAU,CAACF,IAAI,CAAC,EAAE;MACzBC,GAAG,CAACE,UAAU,CAACH,IAAI,EAAE,CAAAI,EAAA,GAACN,IAAI,IAAKD,QAA4B,cAAAO,EAAA,uBAAAA,EAAA,CAAEC,QAAQ,CAAC;;IAGxE,OAAO,MAAK;MACV,IAAI,OAAOR,QAAQ,KAAK,UAAU,EAAE;QAClCA,QAAQ,CAACE,OAAO,CAAC;;MAEnB;MACA,IAAIE,GAAG,CAACC,UAAU,CAACF,IAAI,CAAC,EAAE;QACxBC,GAAG,CAACK,aAAa,CAACN,IAAI,CAAC;;IAE3B,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,OAAOA,IAAI;AACb"},"metadata":{},"sourceType":"module","externalDependencies":[]}