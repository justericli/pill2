{"ast":null,"code":"import _regeneratorRuntime from\"/Users/ericli/Desktop/pill2/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/ericli/Desktop/pill2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/ericli/Desktop/pill2/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useContext,useState,useEffect}from\"react\";import{Navigate}from\"react-router-dom\";import{AccountContext}from\"./Account\";import{Auth}from\"aws-amplify\";import UserNameDisplay from\"./UserNameDisplay\";import ImageUpload from\"./Forms/ListingForm.jsx\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Dashboard=function Dashboard(){var _useContext=useContext(AccountContext),getSession=_useContext.getSession;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),authenticated=_useState2[0],setAuthenticated=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),userName=_useState4[0],setUserName=_useState4[1];useEffect(function(){getSession().then(function(){console.log(\"User is authenticated\");setAuthenticated(true);}).catch(function(){console.log(\"User is not authenticated\");setAuthenticated(false);});},[getSession]);useEffect(function(){var fetchUserName=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var user,nameAttr;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return Auth.currentAuthenticatedUser();case 3:user=_context.sent;nameAttr=user.attributes.name;setUserName(nameAttr);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.error(\"Error getting user name:\",_context.t0);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function fetchUserName(){return _ref.apply(this,arguments);};}();fetchUserName();},[]);if(authenticated===null){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}return/*#__PURE__*/_jsx(_Fragment,{children:authenticated?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Welcome to your dashboard, \",/*#__PURE__*/_jsx(UserNameDisplay,{})]}),/*#__PURE__*/_jsx(ImageUpload,{})]}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})});};export default Dashboard;","map":{"version":3,"names":["useContext","useState","useEffect","Navigate","AccountContext","Auth","UserNameDisplay","ImageUpload","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Dashboard","_useContext","getSession","_useState","_useState2","_slicedToArray","authenticated","setAuthenticated","_useState3","_useState4","userName","setUserName","then","console","log","catch","fetchUserName","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","user","nameAttr","wrap","_callee$","_context","prev","next","currentAuthenticatedUser","sent","attributes","name","t0","error","stop","apply","arguments","children","to"],"sources":["/Users/ericli/Desktop/pill2/src/components/Dashboard.jsx"],"sourcesContent":["import { useContext, useState, useEffect } from \"react\";\nimport { Navigate } from \"react-router-dom\";\nimport { AccountContext } from \"./Account\";\nimport { Auth } from \"aws-amplify\";\nimport UserNameDisplay from \"./UserNameDisplay\";\nimport ImageUpload from \"./Forms/ListingForm.jsx\";\n\nconst Dashboard = () => {\n  const { getSession } = useContext(AccountContext);\n  const [authenticated, setAuthenticated] = useState(null);\n  const [userName, setUserName] = useState(\"\");\n\n  useEffect(() => {\n    getSession()\n      .then(() => {\n        console.log(\"User is authenticated\");\n        setAuthenticated(true);\n      })\n      .catch(() => {\n        console.log(\"User is not authenticated\");\n        setAuthenticated(false);\n      });\n  }, [getSession]);\n\n  useEffect(() => {\n    const fetchUserName = async () => {\n      try {\n        const user = await Auth.currentAuthenticatedUser();\n        const nameAttr = user.attributes.name;\n        setUserName(nameAttr);\n      } catch (error) {\n        console.error(\"Error getting user name:\", error);\n      }\n    };\n\n    fetchUserName();\n  }, []);\n\n  if (authenticated === null) {\n    return <div>Loading...</div>;\n  }\n\n  return (\n    <>\n      {authenticated ? (\n        <>\n          <div>\n            Welcome to your dashboard, <UserNameDisplay />\n          </div>\n          <ImageUpload />\n        </>\n      ) : (\n        <Navigate to=\"/login\" />\n      )}\n    </>\n  );\n};\n\nexport default Dashboard;\n"],"mappings":"mWAAA,OAASA,UAAU,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CACvD,OAASC,QAAQ,KAAQ,kBAAkB,CAC3C,OAASC,cAAc,KAAQ,WAAW,CAC1C,OAASC,IAAI,KAAQ,aAAa,CAClC,MAAO,CAAAC,eAAe,KAAM,mBAAmB,CAC/C,MAAO,CAAAC,WAAW,KAAM,yBAAyB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,gCAAAC,QAAA,IAAAC,SAAA,yBAElD,GAAM,CAAAC,SAAS,CAAG,QAAZ,CAAAA,SAASA,CAAA,CAAS,CACtB,IAAAC,WAAA,CAAuBf,UAAU,CAACI,cAAc,CAAC,CAAzCY,UAAU,CAAAD,WAAA,CAAVC,UAAU,CAClB,IAAAC,SAAA,CAA0ChB,QAAQ,CAAC,IAAI,CAAC,CAAAiB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAjDG,aAAa,CAAAF,UAAA,IAAEG,gBAAgB,CAAAH,UAAA,IACtC,IAAAI,UAAA,CAAgCrB,QAAQ,CAAC,EAAE,CAAC,CAAAsB,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAArCE,QAAQ,CAAAD,UAAA,IAAEE,WAAW,CAAAF,UAAA,IAE5BrB,SAAS,CAAC,UAAM,CACdc,UAAU,EAAE,CACTU,IAAI,CAAC,UAAM,CACVC,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAC,CACpCP,gBAAgB,CAAC,IAAI,CAAC,CACxB,CAAC,CAAC,CACDQ,KAAK,CAAC,UAAM,CACXF,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAC,CACxCP,gBAAgB,CAAC,KAAK,CAAC,CACzB,CAAC,CAAC,CACN,CAAC,CAAE,CAACL,UAAU,CAAC,CAAC,CAEhBd,SAAS,CAAC,UAAM,CACd,GAAM,CAAA4B,aAAa,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,IAAA,CAAAC,QAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAEC,CAAArC,IAAI,CAACsC,wBAAwB,EAAE,QAA5CP,IAAI,CAAAI,QAAA,CAAAI,IAAA,CACJP,QAAQ,CAAGD,IAAI,CAACS,UAAU,CAACC,IAAI,CACrCrB,WAAW,CAACY,QAAQ,CAAC,CAACG,QAAA,CAAAE,IAAA,iBAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAO,EAAA,CAAAP,QAAA,aAEtBb,OAAO,CAACqB,KAAK,CAAC,0BAA0B,CAAAR,QAAA,CAAAO,EAAA,CAAQ,CAAC,yBAAAP,QAAA,CAAAS,IAAA,MAAAd,OAAA,gBAEpD,kBARK,CAAAL,aAAaA,CAAA,SAAAC,IAAA,CAAAmB,KAAA,MAAAC,SAAA,OAQlB,CAEDrB,aAAa,EAAE,CACjB,CAAC,CAAE,EAAE,CAAC,CAEN,GAAIV,aAAa,GAAK,IAAI,CAAE,CAC1B,mBAAOX,IAAA,QAAA2C,QAAA,CAAK,YAAU,EAAM,CAC9B,CAEA,mBACE3C,IAAA,CAAAI,SAAA,EAAAuC,QAAA,CACGhC,aAAa,cACZT,KAAA,CAAAE,SAAA,EAAAuC,QAAA,eACEzC,KAAA,QAAAyC,QAAA,EAAK,6BACwB,cAAA3C,IAAA,CAACH,eAAe,IAAG,GAC1C,cACNG,IAAA,CAACF,WAAW,IAAG,GACd,cAEHE,IAAA,CAACN,QAAQ,EAACkD,EAAE,CAAC,QAAQ,EACtB,EACA,CAEP,CAAC,CAED,cAAe,CAAAvC,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}