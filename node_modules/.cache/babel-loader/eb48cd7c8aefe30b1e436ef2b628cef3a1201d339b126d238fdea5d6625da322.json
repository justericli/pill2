{"ast":null,"code":"var _jsxFileName = \"/Users/ericli/Desktop/pill2/src/components/User_login.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Auth } from \"aws-amplify\";\nimport FacebookLogin from \"react-facebook-login\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst User_login = () => {\n  _s();\n  const [fbLoaded, setFbLoaded] = useState(false);\n  const navigate = useNavigate();\n  const responseFacebook = response => {\n    const {\n      email,\n      name,\n      id\n    } = response;\n\n    // Log the response for debug\n    console.log(\"Facebook response:\", response);\n\n    // Update user attributes with Facebook data\n    Auth.currentAuthenticatedUser().then(user => {\n      return Auth.updateUserAttributes(user, {\n        email: email,\n        given_name: name\n      });\n    }).then(data => {\n      console.log(\"Successfully updated user attributes:\", data);\n      navigate(\"/User_dashboard\"); // Redirect the user to the dashboard\n    }).catch(err => {\n      console.log(\"Error updating user attributes:\", err);\n    });\n  };\n  useEffect(() => {\n    if (window.FB) {\n      window.FB.init({\n        appId: \"730655258288890\",\n        cookie: true,\n        xfbml: true,\n        version: \"v15.0\"\n      });\n      setFbLoaded(true);\n    } else {\n      console.log(\"Facebook SDK not loaded yet\");\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(FacebookLogin, {\n      appId: \"730655258288890\",\n      autoLoad: true,\n      fields: \"name,email\",\n      scope: \"public_profile,user_friends,user_actions.books\",\n      callback: responseFacebook,\n      icon: \"fa-facebook\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n};\n_s(User_login, \"sn0OBnilzV6BRpsIyuNYGHaBiRw=\", false, function () {\n  return [useNavigate];\n});\n_c = User_login;\nexport default User_login;\nvar _c;\n$RefreshReg$(_c, \"User_login\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Auth","FacebookLogin","jsxDEV","_jsxDEV","User_login","_s","fbLoaded","setFbLoaded","navigate","responseFacebook","response","email","name","id","console","log","currentAuthenticatedUser","then","user","updateUserAttributes","given_name","data","catch","err","window","FB","init","appId","cookie","xfbml","version","children","autoLoad","fields","scope","callback","icon","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/ericli/Desktop/pill2/src/components/User_login.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Auth } from \"aws-amplify\";\nimport FacebookLogin from \"react-facebook-login\";\n\nconst User_login = () => {\n  const [fbLoaded, setFbLoaded] = useState(false);\n  const navigate = useNavigate();\n\n  const responseFacebook = (response) => {\n    const { email, name, id } = response;\n\n    // Log the response for debug\n    console.log(\"Facebook response:\", response);\n\n    // Update user attributes with Facebook data\n    Auth.currentAuthenticatedUser()\n      .then((user) => {\n        return Auth.updateUserAttributes(user, {\n          email: email,\n          given_name: name,\n        });\n      })\n      .then((data) => {\n        console.log(\"Successfully updated user attributes:\", data);\n        navigate(\"/User_dashboard\"); // Redirect the user to the dashboard\n      })\n      .catch((err) => {\n        console.log(\"Error updating user attributes:\", err);\n      });\n  };\n\n  useEffect(() => {\n    if (window.FB) {\n      window.FB.init({\n        appId: \"730655258288890\",\n        cookie: true,\n        xfbml: true,\n        version: \"v15.0\",\n      });\n\n      setFbLoaded(true);\n    } else {\n      console.log(\"Facebook SDK not loaded yet\");\n    }\n  }, []);\n\n  return (\n    <div>\n      <FacebookLogin\n        appId=\"730655258288890\"\n        autoLoad={true}\n        fields=\"name,email\"\n        scope=\"public_profile,user_friends,user_actions.books\"\n        callback={responseFacebook}\n        icon=\"fa-facebook\"\n      />\n    </div>\n  );\n};\n\nexport default User_login;\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,IAAI,QAAQ,aAAa;AAClC,OAAOC,aAAa,MAAM,sBAAsB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEjD,MAAMC,UAAU,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACvB,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGV,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAMW,QAAQ,GAAGT,WAAW,EAAE;EAE9B,MAAMU,gBAAgB,GAAIC,QAAQ,IAAK;IACrC,MAAM;MAAEC,KAAK;MAAEC,IAAI;MAAEC;IAAG,CAAC,GAAGH,QAAQ;;IAEpC;IACAI,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAEL,QAAQ,CAAC;;IAE3C;IACAV,IAAI,CAACgB,wBAAwB,EAAE,CAC5BC,IAAI,CAAEC,IAAI,IAAK;MACd,OAAOlB,IAAI,CAACmB,oBAAoB,CAACD,IAAI,EAAE;QACrCP,KAAK,EAAEA,KAAK;QACZS,UAAU,EAAER;MACd,CAAC,CAAC;IACJ,CAAC,CAAC,CACDK,IAAI,CAAEI,IAAI,IAAK;MACdP,OAAO,CAACC,GAAG,CAAC,uCAAuC,EAAEM,IAAI,CAAC;MAC1Db,QAAQ,CAAC,iBAAiB,CAAC,CAAC,CAAC;IAC/B,CAAC,CAAC,CACDc,KAAK,CAAEC,GAAG,IAAK;MACdT,OAAO,CAACC,GAAG,CAAC,iCAAiC,EAAEQ,GAAG,CAAC;IACrD,CAAC,CAAC;EACN,CAAC;EAEDzB,SAAS,CAAC,MAAM;IACd,IAAI0B,MAAM,CAACC,EAAE,EAAE;MACbD,MAAM,CAACC,EAAE,CAACC,IAAI,CAAC;QACbC,KAAK,EAAE,iBAAiB;QACxBC,MAAM,EAAE,IAAI;QACZC,KAAK,EAAE,IAAI;QACXC,OAAO,EAAE;MACX,CAAC,CAAC;MAEFvB,WAAW,CAAC,IAAI,CAAC;IACnB,CAAC,MAAM;MACLO,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAC;IAC5C;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,oBACEZ,OAAA;IAAA4B,QAAA,eACE5B,OAAA,CAACF,aAAa;MACZ0B,KAAK,EAAC,iBAAiB;MACvBK,QAAQ,EAAE,IAAK;MACfC,MAAM,EAAC,YAAY;MACnBC,KAAK,EAAC,gDAAgD;MACtDC,QAAQ,EAAE1B,gBAAiB;MAC3B2B,IAAI,EAAC;IAAa;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAClB;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QACE;AAEV,CAAC;AAACnC,EAAA,CAtDID,UAAU;EAAA,QAEGL,WAAW;AAAA;AAAA0C,EAAA,GAFxBrC,UAAU;AAwDhB,eAAeA,UAAU;AAAC,IAAAqC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}