{"ast":null,"code":"import _regeneratorRuntime from \"/Users/ericli/Desktop/pill2/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/ericli/Desktop/pill2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { HttpRequest } from \"@aws-sdk/protocol-http\";\nexport function resolveHostHeaderConfig(input) {\n  return input;\n}\nexport var hostHeaderMiddleware = function hostHeaderMiddleware(options) {\n  return function (next) {\n    return /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(args) {\n        var request, _ref2, _ref2$handlerProtocol, handlerProtocol, host;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              if (HttpRequest.isInstance(args.request)) {\n                _context.next = 2;\n                break;\n              }\n              return _context.abrupt(\"return\", next(args));\n            case 2:\n              request = args.request;\n              _ref2 = options.requestHandler.metadata || {}, _ref2$handlerProtocol = _ref2.handlerProtocol, handlerProtocol = _ref2$handlerProtocol === void 0 ? \"\" : _ref2$handlerProtocol;\n              if (handlerProtocol.indexOf(\"h2\") >= 0 && !request.headers[\":authority\"]) {\n                delete request.headers[\"host\"];\n                request.headers[\":authority\"] = \"\";\n              } else if (!request.headers[\"host\"]) {\n                host = request.hostname;\n                if (request.port != null) host += \":\".concat(request.port);\n                request.headers[\"host\"] = host;\n              }\n              return _context.abrupt(\"return\", next(args));\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n  };\n};\nexport var hostHeaderMiddlewareOptions = {\n  name: \"hostHeaderMiddleware\",\n  step: \"build\",\n  priority: \"low\",\n  tags: [\"HOST\"],\n  override: true\n};\nexport var getHostHeaderPlugin = function getHostHeaderPlugin(options) {\n  return {\n    applyToStack: function applyToStack(clientStack) {\n      clientStack.add(hostHeaderMiddleware(options), hostHeaderMiddlewareOptions);\n    }\n  };\n};","map":{"version":3,"names":["HttpRequest","resolveHostHeaderConfig","input","hostHeaderMiddleware","options","next","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","args","request","_ref2","_ref2$handlerProtocol","handlerProtocol","host","wrap","_callee$","_context","prev","isInstance","abrupt","requestHandler","metadata","indexOf","headers","hostname","port","concat","stop","_x","apply","arguments","hostHeaderMiddlewareOptions","name","step","priority","tags","override","getHostHeaderPlugin","applyToStack","clientStack","add"],"sources":["/Users/ericli/Desktop/pill2/node_modules/@aws-sdk/client-s3/node_modules/@aws-sdk/middleware-host-header/dist-es/index.js"],"sourcesContent":["import { HttpRequest } from \"@aws-sdk/protocol-http\";\nexport function resolveHostHeaderConfig(input) {\n    return input;\n}\nexport const hostHeaderMiddleware = (options) => (next) => async (args) => {\n    if (!HttpRequest.isInstance(args.request))\n        return next(args);\n    const { request } = args;\n    const { handlerProtocol = \"\" } = options.requestHandler.metadata || {};\n    if (handlerProtocol.indexOf(\"h2\") >= 0 && !request.headers[\":authority\"]) {\n        delete request.headers[\"host\"];\n        request.headers[\":authority\"] = \"\";\n    }\n    else if (!request.headers[\"host\"]) {\n        let host = request.hostname;\n        if (request.port != null)\n            host += `:${request.port}`;\n        request.headers[\"host\"] = host;\n    }\n    return next(args);\n};\nexport const hostHeaderMiddlewareOptions = {\n    name: \"hostHeaderMiddleware\",\n    step: \"build\",\n    priority: \"low\",\n    tags: [\"HOST\"],\n    override: true,\n};\nexport const getHostHeaderPlugin = (options) => ({\n    applyToStack: (clientStack) => {\n        clientStack.add(hostHeaderMiddleware(options), hostHeaderMiddlewareOptions);\n    },\n});\n"],"mappings":";;AAAA,SAASA,WAAW,QAAQ,wBAAwB;AACpD,OAAO,SAASC,uBAAuBA,CAACC,KAAK,EAAE;EAC3C,OAAOA,KAAK;AAChB;AACA,OAAO,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAoBA,CAAIC,OAAO;EAAA,OAAK,UAACC,IAAI;IAAA;MAAA,IAAAC,IAAA,GAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAAK,SAAAC,QAAOC,IAAI;QAAA,IAAAC,OAAA,EAAAC,KAAA,EAAAC,qBAAA,EAAAC,eAAA,EAAAC,IAAA;QAAA,OAAAR,mBAAA,GAAAS,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAd,IAAA;YAAA;cAAA,IAC7DL,WAAW,CAACqB,UAAU,CAACV,IAAI,CAACC,OAAO,CAAC;gBAAAO,QAAA,CAAAd,IAAA;gBAAA;cAAA;cAAA,OAAAc,QAAA,CAAAG,MAAA,WAC9BjB,IAAI,CAACM,IAAI,CAAC;YAAA;cACbC,OAAO,GAAKD,IAAI,CAAhBC,OAAO;cAAAC,KAAA,GACkBT,OAAO,CAACmB,cAAc,CAACC,QAAQ,IAAI,CAAC,CAAC,EAAAV,qBAAA,GAAAD,KAAA,CAA9DE,eAAe,EAAfA,eAAe,GAAAD,qBAAA,cAAG,EAAE,GAAAA,qBAAA;cAC5B,IAAIC,eAAe,CAACU,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAACb,OAAO,CAACc,OAAO,CAAC,YAAY,CAAC,EAAE;gBACtE,OAAOd,OAAO,CAACc,OAAO,CAAC,MAAM,CAAC;gBAC9Bd,OAAO,CAACc,OAAO,CAAC,YAAY,CAAC,GAAG,EAAE;cACtC,CAAC,MACI,IAAI,CAACd,OAAO,CAACc,OAAO,CAAC,MAAM,CAAC,EAAE;gBAC3BV,IAAI,GAAGJ,OAAO,CAACe,QAAQ;gBAC3B,IAAIf,OAAO,CAACgB,IAAI,IAAI,IAAI,EACpBZ,IAAI,QAAAa,MAAA,CAAQjB,OAAO,CAACgB,IAAI,CAAE;gBAC9BhB,OAAO,CAACc,OAAO,CAAC,MAAM,CAAC,GAAGV,IAAI;cAClC;cAAC,OAAAG,QAAA,CAAAG,MAAA,WACMjB,IAAI,CAACM,IAAI,CAAC;YAAA;YAAA;cAAA,OAAAQ,QAAA,CAAAW,IAAA;UAAA;QAAA,GAAApB,OAAA;MAAA,CACpB;MAAA,iBAAAqB,EAAA;QAAA,OAAAzB,IAAA,CAAA0B,KAAA,OAAAC,SAAA;MAAA;IAAA;EAAA;AAAA;AACD,OAAO,IAAMC,2BAA2B,GAAG;EACvCC,IAAI,EAAE,sBAAsB;EAC5BC,IAAI,EAAE,OAAO;EACbC,QAAQ,EAAE,KAAK;EACfC,IAAI,EAAE,CAAC,MAAM,CAAC;EACdC,QAAQ,EAAE;AACd,CAAC;AACD,OAAO,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAIpC,OAAO;EAAA,OAAM;IAC7CqC,YAAY,EAAE,SAAAA,aAACC,WAAW,EAAK;MAC3BA,WAAW,CAACC,GAAG,CAACxC,oBAAoB,CAACC,OAAO,CAAC,EAAE8B,2BAA2B,CAAC;IAC/E;EACJ,CAAC;AAAA,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}