{"ast":null,"code":"import _regeneratorRuntime from \"/Users/ericli/Desktop/pill2/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _defineProperty from \"/Users/ericli/Desktop/pill2/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _objectSpread from \"/Users/ericli/Desktop/pill2/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _asyncToGenerator from \"/Users/ericli/Desktop/pill2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { HttpRequest } from \"@aws-sdk/protocol-http\";\nvar CONTENT_LENGTH_HEADER = \"content-length\";\nexport function contentLengthMiddleware(bodyLengthChecker) {\n  return function (next) {\n    return /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(args) {\n        var request, body, headers, length;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              request = args.request;\n              if (HttpRequest.isInstance(request)) {\n                body = request.body, headers = request.headers;\n                if (body && Object.keys(headers).map(function (str) {\n                  return str.toLowerCase();\n                }).indexOf(CONTENT_LENGTH_HEADER) === -1) {\n                  try {\n                    length = bodyLengthChecker(body);\n                    request.headers = _objectSpread(_objectSpread({}, request.headers), {}, _defineProperty({}, CONTENT_LENGTH_HEADER, String(length)));\n                  } catch (error) {}\n                }\n              }\n              return _context.abrupt(\"return\", next(_objectSpread(_objectSpread({}, args), {}, {\n                request: request\n              })));\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n  };\n}\nexport var contentLengthMiddlewareOptions = {\n  step: \"build\",\n  tags: [\"SET_CONTENT_LENGTH\", \"CONTENT_LENGTH\"],\n  name: \"contentLengthMiddleware\",\n  override: true\n};\nexport var getContentLengthPlugin = function getContentLengthPlugin(options) {\n  return {\n    applyToStack: function applyToStack(clientStack) {\n      clientStack.add(contentLengthMiddleware(options.bodyLengthChecker), contentLengthMiddlewareOptions);\n    }\n  };\n};","map":{"version":3,"names":["HttpRequest","CONTENT_LENGTH_HEADER","contentLengthMiddleware","bodyLengthChecker","next","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","args","request","body","headers","length","wrap","_callee$","_context","prev","isInstance","Object","keys","map","str","toLowerCase","indexOf","_objectSpread","_defineProperty","String","error","abrupt","stop","_x","apply","arguments","contentLengthMiddlewareOptions","step","tags","name","override","getContentLengthPlugin","options","applyToStack","clientStack","add"],"sources":["/Users/ericli/Desktop/pill2/node_modules/@aws-sdk/client-s3/node_modules/@aws-sdk/middleware-content-length/dist-es/index.js"],"sourcesContent":["import { HttpRequest } from \"@aws-sdk/protocol-http\";\nconst CONTENT_LENGTH_HEADER = \"content-length\";\nexport function contentLengthMiddleware(bodyLengthChecker) {\n    return (next) => async (args) => {\n        const request = args.request;\n        if (HttpRequest.isInstance(request)) {\n            const { body, headers } = request;\n            if (body &&\n                Object.keys(headers)\n                    .map((str) => str.toLowerCase())\n                    .indexOf(CONTENT_LENGTH_HEADER) === -1) {\n                try {\n                    const length = bodyLengthChecker(body);\n                    request.headers = {\n                        ...request.headers,\n                        [CONTENT_LENGTH_HEADER]: String(length),\n                    };\n                }\n                catch (error) {\n                }\n            }\n        }\n        return next({\n            ...args,\n            request,\n        });\n    };\n}\nexport const contentLengthMiddlewareOptions = {\n    step: \"build\",\n    tags: [\"SET_CONTENT_LENGTH\", \"CONTENT_LENGTH\"],\n    name: \"contentLengthMiddleware\",\n    override: true,\n};\nexport const getContentLengthPlugin = (options) => ({\n    applyToStack: (clientStack) => {\n        clientStack.add(contentLengthMiddleware(options.bodyLengthChecker), contentLengthMiddlewareOptions);\n    },\n});\n"],"mappings":";;;;AAAA,SAASA,WAAW,QAAQ,wBAAwB;AACpD,IAAMC,qBAAqB,GAAG,gBAAgB;AAC9C,OAAO,SAASC,uBAAuBA,CAACC,iBAAiB,EAAE;EACvD,OAAO,UAACC,IAAI;IAAA;MAAA,IAAAC,IAAA,GAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAAK,SAAAC,QAAOC,IAAI;QAAA,IAAAC,OAAA,EAAAC,IAAA,EAAAC,OAAA,EAAAC,MAAA;QAAA,OAAAP,mBAAA,GAAAQ,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAb,IAAA;YAAA;cAClBO,OAAO,GAAGD,IAAI,CAACC,OAAO;cAC5B,IAAIX,WAAW,CAACmB,UAAU,CAACR,OAAO,CAAC,EAAE;gBACzBC,IAAI,GAAcD,OAAO,CAAzBC,IAAI,EAAEC,OAAO,GAAKF,OAAO,CAAnBE,OAAO;gBACrB,IAAID,IAAI,IACJQ,MAAM,CAACC,IAAI,CAACR,OAAO,CAAC,CACfS,GAAG,CAAC,UAACC,GAAG;kBAAA,OAAKA,GAAG,CAACC,WAAW,EAAE;gBAAA,EAAC,CAC/BC,OAAO,CAACxB,qBAAqB,CAAC,KAAK,CAAC,CAAC,EAAE;kBAC5C,IAAI;oBACMa,MAAM,GAAGX,iBAAiB,CAACS,IAAI,CAAC;oBACtCD,OAAO,CAACE,OAAO,GAAAa,aAAA,CAAAA,aAAA,KACRf,OAAO,CAACE,OAAO,OAAAc,eAAA,KACjB1B,qBAAqB,EAAG2B,MAAM,CAACd,MAAM,CAAC,EAC1C;kBACL,CAAC,CACD,OAAOe,KAAK,EAAE,CACd;gBACJ;cACJ;cAAC,OAAAZ,QAAA,CAAAa,MAAA,WACM1B,IAAI,CAAAsB,aAAA,CAAAA,aAAA,KACJhB,IAAI;gBACPC,OAAO,EAAPA;cAAO,GACT;YAAA;YAAA;cAAA,OAAAM,QAAA,CAAAc,IAAA;UAAA;QAAA,GAAAtB,OAAA;MAAA,CACL;MAAA,iBAAAuB,EAAA;QAAA,OAAA3B,IAAA,CAAA4B,KAAA,OAAAC,SAAA;MAAA;IAAA;EAAA;AACL;AACA,OAAO,IAAMC,8BAA8B,GAAG;EAC1CC,IAAI,EAAE,OAAO;EACbC,IAAI,EAAE,CAAC,oBAAoB,EAAE,gBAAgB,CAAC;EAC9CC,IAAI,EAAE,yBAAyB;EAC/BC,QAAQ,EAAE;AACd,CAAC;AACD,OAAO,IAAMC,sBAAsB,GAAG,SAAzBA,sBAAsBA,CAAIC,OAAO;EAAA,OAAM;IAChDC,YAAY,EAAE,SAAAA,aAACC,WAAW,EAAK;MAC3BA,WAAW,CAACC,GAAG,CAAC1C,uBAAuB,CAACuC,OAAO,CAACtC,iBAAiB,CAAC,EAAEgC,8BAA8B,CAAC;IACvG;EACJ,CAAC;AAAA,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}