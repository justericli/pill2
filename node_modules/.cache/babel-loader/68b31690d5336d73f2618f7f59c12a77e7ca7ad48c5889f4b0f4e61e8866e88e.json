{"ast":null,"code":"import _regeneratorRuntime from \"/Users/ericli/Desktop/pill2/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _objectSpread from \"/Users/ericli/Desktop/pill2/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _asyncToGenerator from \"/Users/ericli/Desktop/pill2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { getEndpointFromInstructions } from \"./adaptors/getEndpointFromInstructions\";\nexport var endpointMiddleware = function endpointMiddleware(_ref) {\n  var config = _ref.config,\n    instructions = _ref.instructions;\n  return function (next, context) {\n    return /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(args) {\n        var _endpoint$properties, _context$authSchemes;\n        var endpoint, authScheme;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return getEndpointFromInstructions(args.input, {\n                getEndpointParameterInstructions: function getEndpointParameterInstructions() {\n                  return instructions;\n                }\n              }, _objectSpread({}, config), context);\n            case 2:\n              endpoint = _context.sent;\n              context.endpointV2 = endpoint;\n              context.authSchemes = (_endpoint$properties = endpoint.properties) === null || _endpoint$properties === void 0 ? void 0 : _endpoint$properties.authSchemes;\n              authScheme = (_context$authSchemes = context.authSchemes) === null || _context$authSchemes === void 0 ? void 0 : _context$authSchemes[0];\n              if (authScheme) {\n                context[\"signing_region\"] = authScheme.signingRegion;\n                context[\"signing_service\"] = authScheme.signingName;\n              }\n              return _context.abrupt(\"return\", next(_objectSpread({}, args)));\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n  };\n};","map":{"version":3,"names":["getEndpointFromInstructions","endpointMiddleware","_ref","config","instructions","next","context","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","args","_endpoint$properties","_context$authSchemes","endpoint","authScheme","wrap","_callee$","_context","prev","input","getEndpointParameterInstructions","_objectSpread","sent","endpointV2","authSchemes","properties","signingRegion","signingName","abrupt","stop","_x","apply","arguments"],"sources":["/Users/ericli/Desktop/pill2/node_modules/@aws-sdk/middleware-endpoint/dist-es/endpointMiddleware.js"],"sourcesContent":["import { getEndpointFromInstructions } from \"./adaptors/getEndpointFromInstructions\";\nexport const endpointMiddleware = ({ config, instructions, }) => {\n    return (next, context) => async (args) => {\n        const endpoint = await getEndpointFromInstructions(args.input, {\n            getEndpointParameterInstructions() {\n                return instructions;\n            },\n        }, { ...config }, context);\n        context.endpointV2 = endpoint;\n        context.authSchemes = endpoint.properties?.authSchemes;\n        const authScheme = context.authSchemes?.[0];\n        if (authScheme) {\n            context[\"signing_region\"] = authScheme.signingRegion;\n            context[\"signing_service\"] = authScheme.signingName;\n        }\n        return next({\n            ...args,\n        });\n    };\n};\n"],"mappings":";;;AAAA,SAASA,2BAA2B,QAAQ,wCAAwC;AACpF,OAAO,IAAMC,kBAAkB,GAAG,SAArBA,kBAAkBA,CAAAC,IAAA,EAAkC;EAAA,IAA5BC,MAAM,GAAAD,IAAA,CAANC,MAAM;IAAEC,YAAY,GAAAF,IAAA,CAAZE,YAAY;EACrD,OAAO,UAACC,IAAI,EAAEC,OAAO;IAAA;MAAA,IAAAC,KAAA,GAAAC,iBAAA,eAAAC,mBAAA,GAAAC,IAAA,CAAK,SAAAC,QAAOC,IAAI;QAAA,IAAAC,oBAAA,EAAAC,oBAAA;QAAA,IAAAC,QAAA,EAAAC,UAAA;QAAA,OAAAP,mBAAA,GAAAQ,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAd,IAAA;YAAA;cAAAc,QAAA,CAAAd,IAAA;cAAA,OACVL,2BAA2B,CAACY,IAAI,CAACS,KAAK,EAAE;gBAC3DC,gCAAgC,WAAAA,iCAAA,EAAG;kBAC/B,OAAOlB,YAAY;gBACvB;cACJ,CAAC,EAAAmB,aAAA,KAAOpB,MAAM,GAAIG,OAAO,CAAC;YAAA;cAJpBS,QAAQ,GAAAI,QAAA,CAAAK,IAAA;cAKdlB,OAAO,CAACmB,UAAU,GAAGV,QAAQ;cAC7BT,OAAO,CAACoB,WAAW,IAAAb,oBAAA,GAAGE,QAAQ,CAACY,UAAU,cAAAd,oBAAA,uBAAnBA,oBAAA,CAAqBa,WAAW;cAChDV,UAAU,IAAAF,oBAAA,GAAGR,OAAO,CAACoB,WAAW,cAAAZ,oBAAA,uBAAnBA,oBAAA,CAAsB,CAAC,CAAC;cAC3C,IAAIE,UAAU,EAAE;gBACZV,OAAO,CAAC,gBAAgB,CAAC,GAAGU,UAAU,CAACY,aAAa;gBACpDtB,OAAO,CAAC,iBAAiB,CAAC,GAAGU,UAAU,CAACa,WAAW;cACvD;cAAC,OAAAV,QAAA,CAAAW,MAAA,WACMzB,IAAI,CAAAkB,aAAA,KACJX,IAAI,EACT;YAAA;YAAA;cAAA,OAAAO,QAAA,CAAAY,IAAA;UAAA;QAAA,GAAApB,OAAA;MAAA,CACL;MAAA,iBAAAqB,EAAA;QAAA,OAAAzB,KAAA,CAAA0B,KAAA,OAAAC,SAAA;MAAA;IAAA;EAAA;AACL,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}