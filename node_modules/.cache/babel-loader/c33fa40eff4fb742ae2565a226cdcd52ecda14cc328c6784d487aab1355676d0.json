{"ast":null,"code":"// import React, { useState, useEffect, useContext } from \"react\";\n// import { useNavigate } from \"react-router-dom\";\n// import { Auth } from \"aws-amplify\";\n// import { AccountContext } from \"./User_Account.jsx\";\n// import FacebookLogin from \"facebook-login\";\n\n// const User_login = () => {\n//   const [email, setEmail] = useState(\"\");\n//   const [password, setPassword] = useState(\"\");\n//   const [fbLoaded, setFbLoaded] = useState(false);\n//   const navigate = useNavigate();\n//   const { authenticate, setAuthenticated } = useContext(AccountContext);\n\n//   Auth.currentAuthenticatedUser()\n//     .then((user) => {\n//       return Auth.updateUserAttributes(user, {\n//         email: email,\n//         given_name: public_profile, // Amplify uses 'given_name' instead of 'first_name'\n//         family_name: public_profile, // Amplify uses 'family_name' instead of 'last_name'\n//       });\n//     })\n//     .then((data) => {\n//       console.log(\"Successfully updated user attributes:\", data);\n//     })\n//     .catch((err) => {\n//       console.log(\"Error updating user attributes:\", err);\n//     });\n\n//   const statusChangeCallback = (response) => {\n//     console.log(\"Status Change Callback Response:\", response);\n//     if (response.status === \"connected\") {\n//       getUserInfo();\n//     } else {\n//       console.log(\"User cancelled login or did not fully authorize.\");\n//       document.getElementById(\"status\").innerHTML =\n//         \"Please log into this webpage.\";\n//     }\n//   };\n\n//   const getUserInfo = () => {\n//     console.log(\"Getting user info\");\n//     window.FB.api(\n//       \"/me\",\n//       {\n//         fields: \"first_name,last_name,email\",\n//         appsecret_proof: process.env.PASS_PHRASE,\n//       },\n//       function (response) {\n//         console.log(\"User info response:\", response);\n//         console.log(\"Successful login for: \" + response.name);\n\n//         const authResponse = window.FB.getAuthResponse();\n//         let { accessToken, expiresIn } = authResponse;\n\n//         if (!accessToken || !expiresIn) {\n//           console.log(\"Access token or expiration time is missing.\");\n//           return;\n//         }\n\n//         document.getElementById(\"status\").innerHTML =\n//           \"Thanks for logging in, \" + response.name + \"!\";\n\n//         console.log(\"Facebook Access Token: \", accessToken);\n\n//         const { email, first_name, last_name } = response;\n\n//         console.log(\n//           \"FACEBOOK_APP_SECRET: \",\n//           process.env.REACT_APP_FACEBOOK_APP_SECRET\n//         );\n\n//         // Get the current authenticated user and then update attributes\n//         Auth.currentAuthenticatedUser()\n//           .then((user) => {\n//             return Auth.updateUserAttributes(user, {\n//               email: email, // Setting the email\n//               given_name: first_name, // Set 'given_name' attribute\n//               family_name: last_name, // Set 'family_name' attribute\n//               // 'gender': gender,  // gender might not be available\n//             });\n//           })\n//           .then((data) => {\n//             console.log(\"Successfully updated user attributes:\", data);\n//           })\n//           .catch((err) => {\n//             console.log(\"Error updating user attributes:\", err);\n//           });\n\n//         // Redirect the user to the dashboard\n//         navigate(\"/User_dashboard\");\n//       }\n//     );\n//   };\n\n//   const checkLoginState = () => {\n//     console.log(\"Checking login state\");\n//     if (fbLoaded && window.FB.getAuthResponse().status === \"connected\") {\n//       getUserInfo();\n//     }\n//   };\n\n//   useEffect(() => {\n//     if (window.FB) {\n//       window.FB.init({\n//         appId: \"730655258288890\",\n//         cookie: true,\n//         xfbml: true,\n//         version: \"v15.0\",\n//       });\n\n//       window.FB.getLoginStatus(statusChangeCallback);\n//     } else {\n//       console.log(\"Facebook SDK not loaded yet\");\n//     }\n//   }, []);\n\n//   const onSubmit = (event) => {\n//     event.preventDefault();\n\n//     // Authenticate the user with the Amplify Auth service\n//     Auth.signIn(email, password, (err, data) => {\n//       if (err) {\n//         console.log(\"Error signing in user:\", err);\n//       } else {\n//         console.log(\"Successfully signed in user:\", data);\n\n//         // Check the user's login state\n//         checkLoginState();\n//       }\n//     });\n//   };\n\n//   return (\n//     <div>\n//       <form onSubmit={onSubmit}>\n//         <label htmlFor=\"email\">Email</label>\n//         <input\n//           value={email}\n//           onChange={(event) => setEmail(event.target.value)}\n//         ></input>\n//         <label htmlFor=\"password\">Password</label>\n//         <input\n//           value={password}\n//           onChange={(event) => setPassword(event.target.value)}\n//         ></input>\n//         <button type=\"submit\">Login</button>\n//       </form>\n//       <div\n//         className=\"fb-login-button\"\n//         data-width=\"\"\n//         data-size=\"large\"\n//         data-button-type=\"continue_with\"\n//         data-layout=\"default\"\n//         data-auto-logout-link=\"false\"\n//         data-use-continue-as=\"true\"\n//       ></div>\n//       <button onClick={checkLoginState} disabled={!fbLoaded}>\n//         Hi\n//       </button>\n//     </div>\n//   );\n// };\n\n// export default User_login;","map":{"version":3,"names":[],"sources":["/Users/ericli/Desktop/pill2/src/components/User_login.jsx"],"sourcesContent":["// import React, { useState, useEffect, useContext } from \"react\";\n// import { useNavigate } from \"react-router-dom\";\n// import { Auth } from \"aws-amplify\";\n// import { AccountContext } from \"./User_Account.jsx\";\n// import FacebookLogin from \"facebook-login\";\n\n// const User_login = () => {\n//   const [email, setEmail] = useState(\"\");\n//   const [password, setPassword] = useState(\"\");\n//   const [fbLoaded, setFbLoaded] = useState(false);\n//   const navigate = useNavigate();\n//   const { authenticate, setAuthenticated } = useContext(AccountContext);\n\n//   Auth.currentAuthenticatedUser()\n//     .then((user) => {\n//       return Auth.updateUserAttributes(user, {\n//         email: email,\n//         given_name: public_profile, // Amplify uses 'given_name' instead of 'first_name'\n//         family_name: public_profile, // Amplify uses 'family_name' instead of 'last_name'\n//       });\n//     })\n//     .then((data) => {\n//       console.log(\"Successfully updated user attributes:\", data);\n//     })\n//     .catch((err) => {\n//       console.log(\"Error updating user attributes:\", err);\n//     });\n\n//   const statusChangeCallback = (response) => {\n//     console.log(\"Status Change Callback Response:\", response);\n//     if (response.status === \"connected\") {\n//       getUserInfo();\n//     } else {\n//       console.log(\"User cancelled login or did not fully authorize.\");\n//       document.getElementById(\"status\").innerHTML =\n//         \"Please log into this webpage.\";\n//     }\n//   };\n\n//   const getUserInfo = () => {\n//     console.log(\"Getting user info\");\n//     window.FB.api(\n//       \"/me\",\n//       {\n//         fields: \"first_name,last_name,email\",\n//         appsecret_proof: process.env.PASS_PHRASE,\n//       },\n//       function (response) {\n//         console.log(\"User info response:\", response);\n//         console.log(\"Successful login for: \" + response.name);\n\n//         const authResponse = window.FB.getAuthResponse();\n//         let { accessToken, expiresIn } = authResponse;\n\n//         if (!accessToken || !expiresIn) {\n//           console.log(\"Access token or expiration time is missing.\");\n//           return;\n//         }\n\n//         document.getElementById(\"status\").innerHTML =\n//           \"Thanks for logging in, \" + response.name + \"!\";\n\n//         console.log(\"Facebook Access Token: \", accessToken);\n\n//         const { email, first_name, last_name } = response;\n\n//         console.log(\n//           \"FACEBOOK_APP_SECRET: \",\n//           process.env.REACT_APP_FACEBOOK_APP_SECRET\n//         );\n\n//         // Get the current authenticated user and then update attributes\n//         Auth.currentAuthenticatedUser()\n//           .then((user) => {\n//             return Auth.updateUserAttributes(user, {\n//               email: email, // Setting the email\n//               given_name: first_name, // Set 'given_name' attribute\n//               family_name: last_name, // Set 'family_name' attribute\n//               // 'gender': gender,  // gender might not be available\n//             });\n//           })\n//           .then((data) => {\n//             console.log(\"Successfully updated user attributes:\", data);\n//           })\n//           .catch((err) => {\n//             console.log(\"Error updating user attributes:\", err);\n//           });\n\n//         // Redirect the user to the dashboard\n//         navigate(\"/User_dashboard\");\n//       }\n//     );\n//   };\n\n//   const checkLoginState = () => {\n//     console.log(\"Checking login state\");\n//     if (fbLoaded && window.FB.getAuthResponse().status === \"connected\") {\n//       getUserInfo();\n//     }\n//   };\n\n//   useEffect(() => {\n//     if (window.FB) {\n//       window.FB.init({\n//         appId: \"730655258288890\",\n//         cookie: true,\n//         xfbml: true,\n//         version: \"v15.0\",\n//       });\n\n//       window.FB.getLoginStatus(statusChangeCallback);\n//     } else {\n//       console.log(\"Facebook SDK not loaded yet\");\n//     }\n//   }, []);\n\n//   const onSubmit = (event) => {\n//     event.preventDefault();\n\n//     // Authenticate the user with the Amplify Auth service\n//     Auth.signIn(email, password, (err, data) => {\n//       if (err) {\n//         console.log(\"Error signing in user:\", err);\n//       } else {\n//         console.log(\"Successfully signed in user:\", data);\n\n//         // Check the user's login state\n//         checkLoginState();\n//       }\n//     });\n//   };\n\n//   return (\n//     <div>\n//       <form onSubmit={onSubmit}>\n//         <label htmlFor=\"email\">Email</label>\n//         <input\n//           value={email}\n//           onChange={(event) => setEmail(event.target.value)}\n//         ></input>\n//         <label htmlFor=\"password\">Password</label>\n//         <input\n//           value={password}\n//           onChange={(event) => setPassword(event.target.value)}\n//         ></input>\n//         <button type=\"submit\">Login</button>\n//       </form>\n//       <div\n//         className=\"fb-login-button\"\n//         data-width=\"\"\n//         data-size=\"large\"\n//         data-button-type=\"continue_with\"\n//         data-layout=\"default\"\n//         data-auto-logout-link=\"false\"\n//         data-use-continue-as=\"true\"\n//       ></div>\n//       <button onClick={checkLoginState} disabled={!fbLoaded}>\n//         Hi\n//       </button>\n//     </div>\n//   );\n// };\n\n// export default User_login;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA"},"metadata":{},"sourceType":"module","externalDependencies":[]}