{"ast":null,"code":"import { __awaiter as t } from \"tslib\";\nimport { Hub as e } from \"aws-amplify\";\nimport { appendToCognitoUserAgent as a } from \"@aws-amplify/auth\";\nimport { waitFor as n } from \"xstate/lib/waitFor.js\";\nimport { ALLOWED_SPECIAL_CHARACTERS as i } from \"./constants.mjs\";\nimport { getActorState as o } from \"./actor.mjs\";\nconst s = _ref => {\n    let {\n      packageName: t,\n      version: e\n    } = _ref;\n    a(`${t}/${e}`);\n  },\n  r = t => {\n    const e = t.trim().split(\"\");\n    for (let t = 0; t < e.length; t++) t > 0 && t < e.length - 1 && (e[t] = \"*\");\n    return e.join(\"\");\n  },\n  c = t => {\n    if (t.length < 4) return t;\n    const e = t.split(\"\");\n    for (let t = 0; t < e.length - 4; t++) e[t] = \"*\";\n    return e.join(\"\");\n  },\n  l = e => t(void 0, void 0, void 0, function* () {\n    try {\n      yield n(e, t => o(t).matches(\"autoSignIn\"));\n    } catch (t) {}\n  }),\n  d = (e, a) => t(void 0, void 0, void 0, function* () {\n    const {\n        send: t\n      } = a,\n      n = a.getSnapshot();\n    switch (e.payload.event) {\n      case \"tokenRefresh\":\n        n.matches(\"authenticated.idle\") && t(\"TOKEN_REFRESH\");\n        break;\n      case \"autoSignIn\":\n        if (!n.matches(\"authenticated\")) {\n          yield l(a);\n          const n = o(a.getSnapshot());\n          (null == n ? void 0 : n.matches(\"autoSignIn\")) && t({\n            type: \"AUTO_SIGN_IN\",\n            data: e.payload.data\n          });\n        }\n        break;\n      case \"autoSignIn_failure\":\n        {\n          yield l(a);\n          const n = o(a.getSnapshot());\n          (null == n ? void 0 : n.matches(\"autoSignIn\")) && t({\n            type: \"AUTO_SIGN_IN_FAILURE\",\n            data: e.payload.data\n          });\n          break;\n        }\n      case \"signOut\":\n      case \"tokenRefresh_failure\":\n        n.matches(\"authenticated.idle\") && t(\"SIGN_OUT\");\n    }\n  }),\n  u = function (t) {\n    let a = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : d;\n    return e.listen(\"auth\", ((t, e) => a => {\n      e(a, t);\n    })(t, a), \"authenticator-hub-handler\");\n  },\n  h = t => i.some(e => t.includes(e)),\n  m = (t, e, a) => encodeURI(`otpauth://totp/${t}:${e}?secret=${a}&issuer=${t}`);\nfunction p(t) {\n  for (var _len = arguments.length, e = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    e[_key - 1] = arguments[_key];\n  }\n  return Object.entries(t).reduce((t, _ref2) => {\n    let [a, n] = _ref2;\n    return Object.assign(Object.assign({}, t), {\n      [a]: e.includes(a) ? n : null == n ? void 0 : n.trim()\n    });\n  }, {});\n}\nexport { r as censorAllButFirstAndLast, c as censorPhoneNumber, s as configureComponent, d as defaultAuthHubHandler, m as getTotpCodeURL, h as hasSpecialChars, u as listenToAuthHub, p as trimValues };","map":{"version":3,"names":["__awaiter","t","Hub","e","appendToCognitoUserAgent","a","waitFor","n","ALLOWED_SPECIAL_CHARACTERS","i","getActorState","o","s","_ref","packageName","version","r","trim","split","length","join","c","l","matches","d","send","getSnapshot","payload","event","type","data","u","arguments","undefined","listen","h","some","includes","m","encodeURI","p","_len","Array","_key","Object","entries","reduce","_ref2","assign","censorAllButFirstAndLast","censorPhoneNumber","configureComponent","defaultAuthHubHandler","getTotpCodeURL","hasSpecialChars","listenToAuthHub","trimValues"],"sources":["/Users/ericli/Desktop/pill2/node_modules/@aws-amplify/ui/dist/esm/helpers/authenticator/utils.mjs"],"sourcesContent":["import{__awaiter as t}from\"tslib\";import{Hub as e}from\"aws-amplify\";import{appendToCognitoUserAgent as a}from\"@aws-amplify/auth\";import{waitFor as n}from\"xstate/lib/waitFor.js\";import{ALLOWED_SPECIAL_CHARACTERS as i}from\"./constants.mjs\";import{getActorState as o}from\"./actor.mjs\";const s=({packageName:t,version:e})=>{a(`${t}/${e}`)},r=t=>{const e=t.trim().split(\"\");for(let t=0;t<e.length;t++)t>0&&t<e.length-1&&(e[t]=\"*\");return e.join(\"\")},c=t=>{if(t.length<4)return t;const e=t.split(\"\");for(let t=0;t<e.length-4;t++)e[t]=\"*\";return e.join(\"\")},l=e=>t(void 0,void 0,void 0,(function*(){try{yield n(e,(t=>o(t).matches(\"autoSignIn\")))}catch(t){}})),d=(e,a)=>t(void 0,void 0,void 0,(function*(){const{send:t}=a,n=a.getSnapshot();switch(e.payload.event){case\"tokenRefresh\":n.matches(\"authenticated.idle\")&&t(\"TOKEN_REFRESH\");break;case\"autoSignIn\":if(!n.matches(\"authenticated\")){yield l(a);const n=o(a.getSnapshot());(null==n?void 0:n.matches(\"autoSignIn\"))&&t({type:\"AUTO_SIGN_IN\",data:e.payload.data})}break;case\"autoSignIn_failure\":{yield l(a);const n=o(a.getSnapshot());(null==n?void 0:n.matches(\"autoSignIn\"))&&t({type:\"AUTO_SIGN_IN_FAILURE\",data:e.payload.data});break}case\"signOut\":case\"tokenRefresh_failure\":n.matches(\"authenticated.idle\")&&t(\"SIGN_OUT\")}})),u=(t,a=d)=>e.listen(\"auth\",((t,e)=>a=>{e(a,t)})(t,a),\"authenticator-hub-handler\"),h=t=>i.some((e=>t.includes(e))),m=(t,e,a)=>encodeURI(`otpauth://totp/${t}:${e}?secret=${a}&issuer=${t}`);function p(t,...e){return Object.entries(t).reduce(((t,[a,n])=>Object.assign(Object.assign({},t),{[a]:e.includes(a)?n:null==n?void 0:n.trim()})),{})}export{r as censorAllButFirstAndLast,c as censorPhoneNumber,s as configureComponent,d as defaultAuthHubHandler,m as getTotpCodeURL,h as hasSpecialChars,u as listenToAuthHub,p as trimValues};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}