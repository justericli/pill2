{"ast":null,"code":"import _defineProperty from \"/Users/ericli/Desktop/pill2/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _regeneratorRuntime from \"/Users/ericli/Desktop/pill2/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _classCallCheck from \"/Users/ericli/Desktop/pill2/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/ericli/Desktop/pill2/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _awaitAsyncGenerator from \"/Users/ericli/Desktop/pill2/node_modules/@babel/runtime/helpers/esm/awaitAsyncGenerator.js\";\nimport _wrapAsyncGenerator from \"/Users/ericli/Desktop/pill2/node_modules/@babel/runtime/helpers/esm/wrapAsyncGenerator.js\";\nimport _asyncIterator from \"/Users/ericli/Desktop/pill2/node_modules/@babel/runtime/helpers/esm/asyncIterator.js\";\nimport { EventStreamCodec } from \"@aws-sdk/eventstream-codec\";\nimport { getChunkedStream } from \"./getChunkedStream\";\nimport { getUnmarshalledStream } from \"./getUnmarshalledStream\";\nexport var EventStreamMarshaller = /*#__PURE__*/function () {\n  function EventStreamMarshaller(_ref2) {\n    var utf8Encoder = _ref2.utf8Encoder,\n      utf8Decoder = _ref2.utf8Decoder;\n    _classCallCheck(this, EventStreamMarshaller);\n    this.eventStreamCodec = new EventStreamCodec(utf8Encoder, utf8Decoder);\n    this.utfEncoder = utf8Encoder;\n  }\n  _createClass(EventStreamMarshaller, [{\n    key: \"deserialize\",\n    value: function deserialize(body, deserializer) {\n      var chunkedStream = getChunkedStream(body);\n      var unmarshalledStream = getUnmarshalledStream(chunkedStream, {\n        eventStreamCodec: this.eventStreamCodec,\n        deserializer: deserializer,\n        toUtf8: this.utfEncoder\n      });\n      return unmarshalledStream;\n    }\n  }, {\n    key: \"serialize\",\n    value: function serialize(input, serializer) {\n      var self = this;\n      var serializedIterator = /*#__PURE__*/function () {\n        var _ref = _wrapAsyncGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n          var _iteratorAbruptCompletion, _didIteratorError, _iteratorError, _iterator, _step, chunk, payloadBuf;\n          return _regeneratorRuntime().wrap(function _callee$(_context) {\n            while (1) switch (_context.prev = _context.next) {\n              case 0:\n                _iteratorAbruptCompletion = false;\n                _didIteratorError = false;\n                _context.prev = 2;\n                _iterator = _asyncIterator(input);\n              case 4:\n                _context.next = 6;\n                return _awaitAsyncGenerator(_iterator.next());\n              case 6:\n                if (!(_iteratorAbruptCompletion = !(_step = _context.sent).done)) {\n                  _context.next = 14;\n                  break;\n                }\n                chunk = _step.value;\n                payloadBuf = self.eventStreamCodec.encode(serializer(chunk));\n                _context.next = 11;\n                return payloadBuf;\n              case 11:\n                _iteratorAbruptCompletion = false;\n                _context.next = 4;\n                break;\n              case 14:\n                _context.next = 20;\n                break;\n              case 16:\n                _context.prev = 16;\n                _context.t0 = _context[\"catch\"](2);\n                _didIteratorError = true;\n                _iteratorError = _context.t0;\n              case 20:\n                _context.prev = 20;\n                _context.prev = 21;\n                if (!(_iteratorAbruptCompletion && _iterator.return != null)) {\n                  _context.next = 25;\n                  break;\n                }\n                _context.next = 25;\n                return _awaitAsyncGenerator(_iterator.return());\n              case 25:\n                _context.prev = 25;\n                if (!_didIteratorError) {\n                  _context.next = 28;\n                  break;\n                }\n                throw _iteratorError;\n              case 28:\n                return _context.finish(25);\n              case 29:\n                return _context.finish(20);\n              case 30:\n                _context.next = 32;\n                return new Uint8Array(0);\n              case 32:\n              case \"end\":\n                return _context.stop();\n            }\n          }, _callee, null, [[2, 16, 20, 30], [21,, 25, 29]]);\n        }));\n        return function serializedIterator() {\n          return _ref.apply(this, arguments);\n        };\n      }();\n      return _defineProperty({}, Symbol.asyncIterator, serializedIterator);\n    }\n  }]);\n  return EventStreamMarshaller;\n}();","map":{"version":3,"names":["EventStreamCodec","getChunkedStream","getUnmarshalledStream","EventStreamMarshaller","_ref2","utf8Encoder","utf8Decoder","_classCallCheck","eventStreamCodec","utfEncoder","_createClass","key","value","deserialize","body","deserializer","chunkedStream","unmarshalledStream","toUtf8","serialize","input","serializer","self","serializedIterator","_ref","_wrapAsyncGenerator","_regeneratorRuntime","mark","_callee","_iteratorAbruptCompletion","_didIteratorError","_iteratorError","_iterator","_step","chunk","payloadBuf","wrap","_callee$","_context","prev","next","_asyncIterator","_awaitAsyncGenerator","sent","done","encode","t0","return","finish","Uint8Array","stop","apply","arguments","_defineProperty","Symbol","asyncIterator"],"sources":["/Users/ericli/Desktop/pill2/node_modules/@aws-sdk/client-s3/node_modules/@aws-sdk/eventstream-serde-universal/dist-es/EventStreamMarshaller.js"],"sourcesContent":["import { EventStreamCodec } from \"@aws-sdk/eventstream-codec\";\nimport { getChunkedStream } from \"./getChunkedStream\";\nimport { getUnmarshalledStream } from \"./getUnmarshalledStream\";\nexport class EventStreamMarshaller {\n    constructor({ utf8Encoder, utf8Decoder }) {\n        this.eventStreamCodec = new EventStreamCodec(utf8Encoder, utf8Decoder);\n        this.utfEncoder = utf8Encoder;\n    }\n    deserialize(body, deserializer) {\n        const chunkedStream = getChunkedStream(body);\n        const unmarshalledStream = getUnmarshalledStream(chunkedStream, {\n            eventStreamCodec: this.eventStreamCodec,\n            deserializer,\n            toUtf8: this.utfEncoder,\n        });\n        return unmarshalledStream;\n    }\n    serialize(input, serializer) {\n        const self = this;\n        const serializedIterator = async function* () {\n            for await (const chunk of input) {\n                const payloadBuf = self.eventStreamCodec.encode(serializer(chunk));\n                yield payloadBuf;\n            }\n            yield new Uint8Array(0);\n        };\n        return {\n            [Symbol.asyncIterator]: serializedIterator,\n        };\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}