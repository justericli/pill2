{"ast":null,"code":"import _slicedToArray from \"/Users/ericli/Desktop/pill2/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _regeneratorRuntime from \"/Users/ericli/Desktop/pill2/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _objectSpread from \"/Users/ericli/Desktop/pill2/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _toConsumableArray from \"/Users/ericli/Desktop/pill2/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _asyncToGenerator from \"/Users/ericli/Desktop/pill2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { HttpRequest } from \"@aws-sdk/protocol-http\";\nimport { getUserAgentPrefix } from \"@aws-sdk/util-endpoints\";\nimport { SPACE, UA_ESCAPE_REGEX, USER_AGENT, X_AMZ_USER_AGENT } from \"./constants\";\nexport var userAgentMiddleware = function userAgentMiddleware(options) {\n  return function (next, context) {\n    return /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(args) {\n        var _context$userAgent, _options$customUserAg;\n        var request, headers, userAgent, defaultUserAgent, customUserAgent, prefix, sdkUserAgentValue, normalUAValue;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              request = args.request;\n              if (HttpRequest.isInstance(request)) {\n                _context.next = 3;\n                break;\n              }\n              return _context.abrupt(\"return\", next(args));\n            case 3:\n              headers = request.headers;\n              userAgent = (context === null || context === void 0 ? void 0 : (_context$userAgent = context.userAgent) === null || _context$userAgent === void 0 ? void 0 : _context$userAgent.map(escapeUserAgent)) || [];\n              _context.next = 7;\n              return options.defaultUserAgentProvider();\n            case 7:\n              defaultUserAgent = _context.sent.map(escapeUserAgent);\n              customUserAgent = (options === null || options === void 0 ? void 0 : (_options$customUserAg = options.customUserAgent) === null || _options$customUserAg === void 0 ? void 0 : _options$customUserAg.map(escapeUserAgent)) || [];\n              prefix = getUserAgentPrefix();\n              sdkUserAgentValue = (prefix ? [prefix] : []).concat([].concat(_toConsumableArray(defaultUserAgent), _toConsumableArray(userAgent), _toConsumableArray(customUserAgent))).join(SPACE);\n              normalUAValue = [].concat(_toConsumableArray(defaultUserAgent.filter(function (section) {\n                return section.startsWith(\"aws-sdk-\");\n              })), _toConsumableArray(customUserAgent)).join(SPACE);\n              if (options.runtime !== \"browser\") {\n                if (normalUAValue) {\n                  headers[X_AMZ_USER_AGENT] = headers[X_AMZ_USER_AGENT] ? \"\".concat(headers[USER_AGENT], \" \").concat(normalUAValue) : normalUAValue;\n                }\n                headers[USER_AGENT] = sdkUserAgentValue;\n              } else {\n                headers[X_AMZ_USER_AGENT] = sdkUserAgentValue;\n              }\n              return _context.abrupt(\"return\", next(_objectSpread(_objectSpread({}, args), {}, {\n                request: request\n              })));\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee);\n      }));\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n  };\n};\nvar escapeUserAgent = function escapeUserAgent(_ref2) {\n  var _ref3 = _slicedToArray(_ref2, 2),\n    name = _ref3[0],\n    version = _ref3[1];\n  var prefixSeparatorIndex = name.indexOf(\"/\");\n  var prefix = name.substring(0, prefixSeparatorIndex);\n  var uaName = name.substring(prefixSeparatorIndex + 1);\n  if (prefix === \"api\") {\n    uaName = uaName.toLowerCase();\n  }\n  return [prefix, uaName, version].filter(function (item) {\n    return item && item.length > 0;\n  }).map(function (item) {\n    return item === null || item === void 0 ? void 0 : item.replace(UA_ESCAPE_REGEX, \"_\");\n  }).join(\"/\");\n};\nexport var getUserAgentMiddlewareOptions = {\n  name: \"getUserAgentMiddleware\",\n  step: \"build\",\n  priority: \"low\",\n  tags: [\"SET_USER_AGENT\", \"USER_AGENT\"],\n  override: true\n};\nexport var getUserAgentPlugin = function getUserAgentPlugin(config) {\n  return {\n    applyToStack: function applyToStack(clientStack) {\n      clientStack.add(userAgentMiddleware(config), getUserAgentMiddlewareOptions);\n    }\n  };\n};","map":{"version":3,"names":["HttpRequest","getUserAgentPrefix","SPACE","UA_ESCAPE_REGEX","USER_AGENT","X_AMZ_USER_AGENT","userAgentMiddleware","options","next","context","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","args","_context$userAgent","_options$customUserAg","request","headers","userAgent","defaultUserAgent","customUserAgent","prefix","sdkUserAgentValue","normalUAValue","wrap","_callee$","_context","prev","isInstance","abrupt","map","escapeUserAgent","defaultUserAgentProvider","sent","concat","_toConsumableArray","join","filter","section","startsWith","runtime","_objectSpread","stop","_x","apply","arguments","_ref2","_ref3","_slicedToArray","name","version","prefixSeparatorIndex","indexOf","substring","uaName","toLowerCase","item","length","replace","getUserAgentMiddlewareOptions","step","priority","tags","override","getUserAgentPlugin","config","applyToStack","clientStack","add"],"sources":["/Users/ericli/Desktop/pill2/node_modules/@aws-sdk/client-s3/node_modules/@aws-sdk/middleware-user-agent/dist-es/user-agent-middleware.js"],"sourcesContent":["import { HttpRequest } from \"@aws-sdk/protocol-http\";\nimport { getUserAgentPrefix } from \"@aws-sdk/util-endpoints\";\nimport { SPACE, UA_ESCAPE_REGEX, USER_AGENT, X_AMZ_USER_AGENT } from \"./constants\";\nexport const userAgentMiddleware = (options) => (next, context) => async (args) => {\n    const { request } = args;\n    if (!HttpRequest.isInstance(request))\n        return next(args);\n    const { headers } = request;\n    const userAgent = context?.userAgent?.map(escapeUserAgent) || [];\n    const defaultUserAgent = (await options.defaultUserAgentProvider()).map(escapeUserAgent);\n    const customUserAgent = options?.customUserAgent?.map(escapeUserAgent) || [];\n    const prefix = getUserAgentPrefix();\n    const sdkUserAgentValue = (prefix ? [prefix] : [])\n        .concat([...defaultUserAgent, ...userAgent, ...customUserAgent])\n        .join(SPACE);\n    const normalUAValue = [\n        ...defaultUserAgent.filter((section) => section.startsWith(\"aws-sdk-\")),\n        ...customUserAgent,\n    ].join(SPACE);\n    if (options.runtime !== \"browser\") {\n        if (normalUAValue) {\n            headers[X_AMZ_USER_AGENT] = headers[X_AMZ_USER_AGENT]\n                ? `${headers[USER_AGENT]} ${normalUAValue}`\n                : normalUAValue;\n        }\n        headers[USER_AGENT] = sdkUserAgentValue;\n    }\n    else {\n        headers[X_AMZ_USER_AGENT] = sdkUserAgentValue;\n    }\n    return next({\n        ...args,\n        request,\n    });\n};\nconst escapeUserAgent = ([name, version]) => {\n    const prefixSeparatorIndex = name.indexOf(\"/\");\n    const prefix = name.substring(0, prefixSeparatorIndex);\n    let uaName = name.substring(prefixSeparatorIndex + 1);\n    if (prefix === \"api\") {\n        uaName = uaName.toLowerCase();\n    }\n    return [prefix, uaName, version]\n        .filter((item) => item && item.length > 0)\n        .map((item) => item?.replace(UA_ESCAPE_REGEX, \"_\"))\n        .join(\"/\");\n};\nexport const getUserAgentMiddlewareOptions = {\n    name: \"getUserAgentMiddleware\",\n    step: \"build\",\n    priority: \"low\",\n    tags: [\"SET_USER_AGENT\", \"USER_AGENT\"],\n    override: true,\n};\nexport const getUserAgentPlugin = (config) => ({\n    applyToStack: (clientStack) => {\n        clientStack.add(userAgentMiddleware(config), getUserAgentMiddlewareOptions);\n    },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}