{"ast":null,"code":"import _slicedToArray from \"/Users/ericli/Desktop/pill2/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _regeneratorRuntime from \"/Users/ericli/Desktop/pill2/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/ericli/Desktop/pill2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nexport var resolveParamsForS3 = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(endpointParams) {\n    var bucket;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          bucket = (endpointParams === null || endpointParams === void 0 ? void 0 : endpointParams.Bucket) || \"\";\n          if (typeof endpointParams.Bucket === \"string\") {\n            endpointParams.Bucket = bucket.replace(/#/g, encodeURIComponent(\"#\")).replace(/\\?/g, encodeURIComponent(\"?\"));\n          }\n          if (!isArnBucketName(bucket)) {\n            _context.next = 7;\n            break;\n          }\n          if (!(endpointParams.ForcePathStyle === true)) {\n            _context.next = 5;\n            break;\n          }\n          throw new Error(\"Path-style addressing cannot be used with ARN buckets\");\n        case 5:\n          _context.next = 8;\n          break;\n        case 7:\n          if (!isDnsCompatibleBucketName(bucket) || bucket.indexOf(\".\") !== -1 && !String(endpointParams.Endpoint).startsWith(\"http:\") || bucket.toLowerCase() !== bucket || bucket.length < 3) {\n            endpointParams.ForcePathStyle = true;\n          }\n        case 8:\n          if (endpointParams.DisableMultiRegionAccessPoints) {\n            endpointParams.disableMultiRegionAccessPoints = true;\n            endpointParams.DisableMRAP = true;\n          }\n          return _context.abrupt(\"return\", endpointParams);\n        case 10:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return function resolveParamsForS3(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nvar DOMAIN_PATTERN = /^[a-z0-9][a-z0-9\\.\\-]{1,61}[a-z0-9]$/;\nvar IP_ADDRESS_PATTERN = /(\\d+\\.){3}\\d+/;\nvar DOTS_PATTERN = /\\.\\./;\nexport var DOT_PATTERN = /\\./;\nexport var S3_HOSTNAME_PATTERN = /^(.+\\.)?s3(-fips)?(\\.dualstack)?[.-]([a-z0-9-]+)\\./;\nexport var isDnsCompatibleBucketName = function isDnsCompatibleBucketName(bucketName) {\n  return DOMAIN_PATTERN.test(bucketName) && !IP_ADDRESS_PATTERN.test(bucketName) && !DOTS_PATTERN.test(bucketName);\n};\nexport var isArnBucketName = function isArnBucketName(bucketName) {\n  var _bucketName$split = bucketName.split(\":\"),\n    _bucketName$split2 = _slicedToArray(_bucketName$split, 6),\n    arn = _bucketName$split2[0],\n    partition = _bucketName$split2[1],\n    service = _bucketName$split2[2],\n    region = _bucketName$split2[3],\n    account = _bucketName$split2[4],\n    typeOrId = _bucketName$split2[5];\n  var isArn = arn === \"arn\" && bucketName.split(\":\").length >= 6;\n  var isValidArn = [arn, partition, service, account, typeOrId].filter(Boolean).length === 5;\n  if (isArn && !isValidArn) {\n    throw new Error(\"Invalid ARN: \".concat(bucketName, \" was an invalid ARN.\"));\n  }\n  return arn === \"arn\" && !!partition && !!service && !!account && !!typeOrId;\n};","map":{"version":3,"names":["resolveParamsForS3","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","endpointParams","bucket","wrap","_callee$","_context","prev","next","Bucket","replace","encodeURIComponent","isArnBucketName","ForcePathStyle","Error","isDnsCompatibleBucketName","indexOf","String","Endpoint","startsWith","toLowerCase","length","DisableMultiRegionAccessPoints","disableMultiRegionAccessPoints","DisableMRAP","abrupt","stop","_x","apply","arguments","DOMAIN_PATTERN","IP_ADDRESS_PATTERN","DOTS_PATTERN","DOT_PATTERN","S3_HOSTNAME_PATTERN","bucketName","test","_bucketName$split","split","_bucketName$split2","_slicedToArray","arn","partition","service","region","account","typeOrId","isArn","isValidArn","filter","Boolean","concat"],"sources":["/Users/ericli/Desktop/pill2/node_modules/@aws-sdk/middleware-endpoint/dist-es/service-customizations/s3.js"],"sourcesContent":["export const resolveParamsForS3 = async (endpointParams) => {\n    const bucket = endpointParams?.Bucket || \"\";\n    if (typeof endpointParams.Bucket === \"string\") {\n        endpointParams.Bucket = bucket.replace(/#/g, encodeURIComponent(\"#\")).replace(/\\?/g, encodeURIComponent(\"?\"));\n    }\n    if (isArnBucketName(bucket)) {\n        if (endpointParams.ForcePathStyle === true) {\n            throw new Error(\"Path-style addressing cannot be used with ARN buckets\");\n        }\n    }\n    else if (!isDnsCompatibleBucketName(bucket) ||\n        (bucket.indexOf(\".\") !== -1 && !String(endpointParams.Endpoint).startsWith(\"http:\")) ||\n        bucket.toLowerCase() !== bucket ||\n        bucket.length < 3) {\n        endpointParams.ForcePathStyle = true;\n    }\n    if (endpointParams.DisableMultiRegionAccessPoints) {\n        endpointParams.disableMultiRegionAccessPoints = true;\n        endpointParams.DisableMRAP = true;\n    }\n    return endpointParams;\n};\nconst DOMAIN_PATTERN = /^[a-z0-9][a-z0-9\\.\\-]{1,61}[a-z0-9]$/;\nconst IP_ADDRESS_PATTERN = /(\\d+\\.){3}\\d+/;\nconst DOTS_PATTERN = /\\.\\./;\nexport const DOT_PATTERN = /\\./;\nexport const S3_HOSTNAME_PATTERN = /^(.+\\.)?s3(-fips)?(\\.dualstack)?[.-]([a-z0-9-]+)\\./;\nexport const isDnsCompatibleBucketName = (bucketName) => DOMAIN_PATTERN.test(bucketName) && !IP_ADDRESS_PATTERN.test(bucketName) && !DOTS_PATTERN.test(bucketName);\nexport const isArnBucketName = (bucketName) => {\n    const [arn, partition, service, region, account, typeOrId] = bucketName.split(\":\");\n    const isArn = arn === \"arn\" && bucketName.split(\":\").length >= 6;\n    const isValidArn = [arn, partition, service, account, typeOrId].filter(Boolean).length === 5;\n    if (isArn && !isValidArn) {\n        throw new Error(`Invalid ARN: ${bucketName} was an invalid ARN.`);\n    }\n    return arn === \"arn\" && !!partition && !!service && !!account && !!typeOrId;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}