{"ast":null,"code":"import _slicedToArray from\"/Users/ericli/Desktop/pill2/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// User_login.jsx\nimport React,{useState,useEffect,useContext}from\"react\";import{useNavigate}from\"react-router-dom\";import{AccountContext}from\"./User_Account.jsx\";import{Auth}from\"aws-amplify\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var User_login=function User_login(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var navigate=useNavigate();var _useContext=useContext(AccountContext),authenticate=_useContext.authenticate,setAuthenticated=_useContext.setAuthenticated;useEffect(function(){// Load the Facebook SDK\nwindow.fbAsyncInit=function(){window.FB.init({appId:\"730655258288890\",// Replace with your Facebook App ID\ncookie:true,xfbml:true,version:\"v15.0\"// Replace with your Facebook SDK version\n});window.FB.AppEvents.logPageView();window.FB.getLoginStatus(function(response){statusChangeCallback(response);});};// Load the Facebook SDK asynchronously\n(function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(d.getElementById(id))return;js=d.createElement(s);js.id=id;js.src=\"https://connect.facebook.net/en_US/sdk.js\";fjs.parentNode.insertBefore(js,fjs);})(document,\"script\",\"facebook-jssdk\");},[]);var statusChangeCallback=function statusChangeCallback(response){if(response.status===\"connected\"){getUserInfo();}};var getUserInfo=function getUserInfo(){window.FB.api(\"/me\",{fields:\"email,first_name,last_name,gender\"},function(response){console.log(\"FB API response: \",response);// Add this line\nvar _window$FB$getAuthRes=window.FB.getAuthResponse(),accessToken=_window$FB$getAuthRes.accessToken,expiresIn=_window$FB$getAuthRes.expiresIn;var email=response.email,first_name=response.first_name,last_name=response.last_name,gender=response.gender;console.log(\"First Name: \",first_name);// prints first name\nconsole.log(\"Last Name: \",last_name);// prints last name\nconsole.log(\"Email: \",email);// prints email\nconsole.log(\"Gender: \",gender);// prints gender\nAuth.federatedSignIn(\"facebook\",{token:accessToken,expires_at:expiresIn*1000+Date.now()// Date.now() returns current time in milliseconds\n},{name:\"\".concat(first_name,\" \").concat(last_name),email:email,picture:\"\",// Add the user's picture here\nemail_verified:true// set this to true or false as per your user's email verification status\n}).then(function(data){console.log(\"federatedSignIn data: \",data);// Add this line\nconsole.log(\"Logged\",data);setAuthenticated(true);navigate(\"/User_dashboard\");}).catch(function(err){console.log(\"Failed to login\",err);});});};var onFacebookLogin=function onFacebookLogin(){window.FB.login(function(response){if(response.authResponse){getUserInfo();}else{console.log(\"User cancelled login or did not fully authorize.\");}},{scope:\"email\"});};var onSubmit=function onSubmit(event){event.preventDefault();authenticate(email,password).then(function(data){console.log(\"Logged\",data);setAuthenticated(true);navigate(\"/User_dashboard\");}).catch(function(err){console.log(\"Failed to login\",err);});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{value:email,onChange:function onChange(event){return setEmail(event.target.value);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{value:password,onChange:function onChange(event){return setPassword(event.target.value);}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Login\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"fb-login-button\",\"data-width\":\"\",\"data-size\":\"large\",\"data-button-type\":\"continue_with\",\"data-layout\":\"default\",\"data-auto-logout-link\":\"false\",\"data-use-continue-as\":\"true\",onClick:onFacebookLogin})]});};export default User_login;","map":{"version":3,"names":["React","useState","useEffect","useContext","useNavigate","AccountContext","Auth","jsx","_jsx","jsxs","_jsxs","User_login","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","navigate","_useContext","authenticate","setAuthenticated","window","fbAsyncInit","FB","init","appId","cookie","xfbml","version","AppEvents","logPageView","getLoginStatus","response","statusChangeCallback","d","s","id","js","fjs","getElementsByTagName","getElementById","createElement","src","parentNode","insertBefore","document","status","getUserInfo","api","fields","console","log","_window$FB$getAuthRes","getAuthResponse","accessToken","expiresIn","first_name","last_name","gender","federatedSignIn","token","expires_at","Date","now","name","concat","picture","email_verified","then","data","catch","err","onFacebookLogin","login","authResponse","scope","onSubmit","event","preventDefault","children","htmlFor","value","onChange","target","type","className","onClick"],"sources":["/Users/ericli/Desktop/pill2/src/components/User_login.jsx"],"sourcesContent":["// User_login.jsx\n\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { AccountContext } from \"./User_Account.jsx\";\nimport { Auth } from \"aws-amplify\";\n\nconst User_login = () => {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const navigate = useNavigate();\n  const { authenticate, setAuthenticated } = useContext(AccountContext);\n\n  useEffect(() => {\n    // Load the Facebook SDK\n    window.fbAsyncInit = function () {\n      window.FB.init({\n        appId: \"730655258288890\", // Replace with your Facebook App ID\n        cookie: true,\n        xfbml: true,\n        version: \"v15.0\", // Replace with your Facebook SDK version\n      });\n\n      window.FB.AppEvents.logPageView();\n\n      window.FB.getLoginStatus(function (response) {\n        statusChangeCallback(response);\n      });\n    };\n\n    // Load the Facebook SDK asynchronously\n    (function (d, s, id) {\n      var js,\n        fjs = d.getElementsByTagName(s)[0];\n      if (d.getElementById(id)) return;\n      js = d.createElement(s);\n      js.id = id;\n      js.src = \"https://connect.facebook.net/en_US/sdk.js\";\n      fjs.parentNode.insertBefore(js, fjs);\n    })(document, \"script\", \"facebook-jssdk\");\n  }, []);\n\n  const statusChangeCallback = (response) => {\n    if (response.status === \"connected\") {\n      getUserInfo();\n    }\n  };\n\n  const getUserInfo = () => {\n    window.FB.api(\n      \"/me\",\n      { fields: \"email,first_name,last_name,gender\" },\n      function (response) {\n        console.log(\"FB API response: \", response); // Add this line\n\n        const { accessToken, expiresIn } = window.FB.getAuthResponse();\n        const { email, first_name, last_name, gender } = response;\n\n        console.log(\"First Name: \", first_name); // prints first name\n        console.log(\"Last Name: \", last_name); // prints last name\n        console.log(\"Email: \", email); // prints email\n        console.log(\"Gender: \", gender); // prints gender\n\n        Auth.federatedSignIn(\n          \"facebook\",\n          {\n            token: accessToken,\n            expires_at: expiresIn * 1000 + Date.now(), // Date.now() returns current time in milliseconds\n          },\n\n          {\n            name: `${first_name} ${last_name}`,\n            email: email,\n            picture: \"\", // Add the user's picture here\n            email_verified: true, // set this to true or false as per your user's email verification status\n          }\n        )\n          .then((data) => {\n            console.log(\"federatedSignIn data: \", data); // Add this line\n            console.log(\"Logged\", data);\n            setAuthenticated(true);\n            navigate(\"/User_dashboard\");\n          })\n          .catch((err) => {\n            console.log(\"Failed to login\", err);\n          });\n      }\n    );\n  };\n\n  const onFacebookLogin = () => {\n    window.FB.login(\n      function (response) {\n        if (response.authResponse) {\n          getUserInfo();\n        } else {\n          console.log(\"User cancelled login or did not fully authorize.\");\n        }\n      },\n      { scope: \"email\" }\n    );\n  };\n\n  const onSubmit = (event) => {\n    event.preventDefault();\n\n    authenticate(email, password)\n      .then((data) => {\n        console.log(\"Logged\", data);\n        setAuthenticated(true);\n        navigate(\"/User_dashboard\");\n      })\n      .catch((err) => {\n        console.log(\"Failed to login\", err);\n      });\n  };\n\n  return (\n    <div>\n      <form onSubmit={onSubmit}>\n        <label htmlFor=\"email\">Email</label>\n        <input\n          value={email}\n          onChange={(event) => setEmail(event.target.value)}\n        ></input>\n        <label htmlFor=\"password\">Password</label>\n        <input\n          value={password}\n          onChange={(event) => setPassword(event.target.value)}\n        ></input>\n        <button type=\"submit\">Login</button>\n      </form>\n      <div\n        className=\"fb-login-button\"\n        data-width=\"\"\n        data-size=\"large\"\n        data-button-type=\"continue_with\"\n        data-layout=\"default\"\n        data-auto-logout-link=\"false\"\n        data-use-continue-as=\"true\"\n        onClick={onFacebookLogin}\n      ></div>\n    </div>\n  );\n};\n\nexport default User_login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}