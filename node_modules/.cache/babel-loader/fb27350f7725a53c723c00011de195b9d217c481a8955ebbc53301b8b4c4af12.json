{"ast":null,"code":"import _createForOfIteratorHelper from \"/Users/ericli/Desktop/pill2/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";\nimport { escapeUri } from \"@aws-sdk/util-uri-escape\";\nimport { SIGNATURE_HEADER } from \"./constants\";\nexport var getCanonicalQuery = function getCanonicalQuery(_ref) {\n  var _ref$query = _ref.query,\n    query = _ref$query === void 0 ? {} : _ref$query;\n  var keys = [];\n  var serialized = {};\n  var _iterator = _createForOfIteratorHelper(Object.keys(query).sort()),\n    _step;\n  try {\n    var _loop = function _loop() {\n      var key = _step.value;\n      if (key.toLowerCase() === SIGNATURE_HEADER) {\n        return \"continue\";\n      }\n      keys.push(key);\n      var value = query[key];\n      if (typeof value === \"string\") {\n        serialized[key] = \"\".concat(escapeUri(key), \"=\").concat(escapeUri(value));\n      } else if (Array.isArray(value)) {\n        serialized[key] = value.slice(0).sort().reduce(function (encoded, value) {\n          return encoded.concat([\"\".concat(escapeUri(key), \"=\").concat(escapeUri(value))]);\n        }, []).join(\"&\");\n      }\n    };\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var _ret = _loop();\n      if (_ret === \"continue\") continue;\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n  return keys.map(function (key) {\n    return serialized[key];\n  }).filter(function (serialized) {\n    return serialized;\n  }).join(\"&\");\n};","map":{"version":3,"names":["escapeUri","SIGNATURE_HEADER","getCanonicalQuery","_ref","_ref$query","query","keys","serialized","_iterator","_createForOfIteratorHelper","Object","sort","_step","_loop","key","value","toLowerCase","push","concat","Array","isArray","slice","reduce","encoded","join","s","n","done","_ret","err","e","f","map","filter"],"sources":["/Users/ericli/Desktop/pill2/node_modules/@aws-sdk/client-s3/node_modules/@aws-sdk/signature-v4/dist-es/getCanonicalQuery.js"],"sourcesContent":["import { escapeUri } from \"@aws-sdk/util-uri-escape\";\nimport { SIGNATURE_HEADER } from \"./constants\";\nexport const getCanonicalQuery = ({ query = {} }) => {\n    const keys = [];\n    const serialized = {};\n    for (const key of Object.keys(query).sort()) {\n        if (key.toLowerCase() === SIGNATURE_HEADER) {\n            continue;\n        }\n        keys.push(key);\n        const value = query[key];\n        if (typeof value === \"string\") {\n            serialized[key] = `${escapeUri(key)}=${escapeUri(value)}`;\n        }\n        else if (Array.isArray(value)) {\n            serialized[key] = value\n                .slice(0)\n                .sort()\n                .reduce((encoded, value) => encoded.concat([`${escapeUri(key)}=${escapeUri(value)}`]), [])\n                .join(\"&\");\n        }\n    }\n    return keys\n        .map((key) => serialized[key])\n        .filter((serialized) => serialized)\n        .join(\"&\");\n};\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,0BAA0B;AACpD,SAASC,gBAAgB,QAAQ,aAAa;AAC9C,OAAO,IAAMC,iBAAiB,GAAG,SAApBA,iBAAiBA,CAAAC,IAAA,EAAuB;EAAA,IAAAC,UAAA,GAAAD,IAAA,CAAjBE,KAAK;IAALA,KAAK,GAAAD,UAAA,cAAG,CAAC,CAAC,GAAAA,UAAA;EAC1C,IAAME,IAAI,GAAG,EAAE;EACf,IAAMC,UAAU,GAAG,CAAC,CAAC;EAAC,IAAAC,SAAA,GAAAC,0BAAA,CACJC,MAAM,CAACJ,IAAI,CAACD,KAAK,CAAC,CAACM,IAAI,EAAE;IAAAC,KAAA;EAAA;IAAA,IAAAC,KAAA,YAAAA,MAAA,EAAE;MAAA,IAAlCC,GAAG,GAAAF,KAAA,CAAAG,KAAA;MACV,IAAID,GAAG,CAACE,WAAW,EAAE,KAAKf,gBAAgB,EAAE;QAAA;MAE5C;MACAK,IAAI,CAACW,IAAI,CAACH,GAAG,CAAC;MACd,IAAMC,KAAK,GAAGV,KAAK,CAACS,GAAG,CAAC;MACxB,IAAI,OAAOC,KAAK,KAAK,QAAQ,EAAE;QAC3BR,UAAU,CAACO,GAAG,CAAC,MAAAI,MAAA,CAAMlB,SAAS,CAACc,GAAG,CAAC,OAAAI,MAAA,CAAIlB,SAAS,CAACe,KAAK,CAAC,CAAE;MAC7D,CAAC,MACI,IAAII,KAAK,CAACC,OAAO,CAACL,KAAK,CAAC,EAAE;QAC3BR,UAAU,CAACO,GAAG,CAAC,GAAGC,KAAK,CAClBM,KAAK,CAAC,CAAC,CAAC,CACRV,IAAI,EAAE,CACNW,MAAM,CAAC,UAACC,OAAO,EAAER,KAAK;UAAA,OAAKQ,OAAO,CAACL,MAAM,CAAC,IAAAA,MAAA,CAAIlB,SAAS,CAACc,GAAG,CAAC,OAAAI,MAAA,CAAIlB,SAAS,CAACe,KAAK,CAAC,EAAG,CAAC;QAAA,GAAE,EAAE,CAAC,CACzFS,IAAI,CAAC,GAAG,CAAC;MAClB;IACJ,CAAC;IAhBD,KAAAhB,SAAA,CAAAiB,CAAA,MAAAb,KAAA,GAAAJ,SAAA,CAAAkB,CAAA,IAAAC,IAAA;MAAA,IAAAC,IAAA,GAAAf,KAAA;MAAA,IAAAe,IAAA,iBAEQ;IAAS;EAchB,SAAAC,GAAA;IAAArB,SAAA,CAAAsB,CAAA,CAAAD,GAAA;EAAA;IAAArB,SAAA,CAAAuB,CAAA;EAAA;EACD,OAAOzB,IAAI,CACN0B,GAAG,CAAC,UAAClB,GAAG;IAAA,OAAKP,UAAU,CAACO,GAAG,CAAC;EAAA,EAAC,CAC7BmB,MAAM,CAAC,UAAC1B,UAAU;IAAA,OAAKA,UAAU;EAAA,EAAC,CAClCiB,IAAI,CAAC,GAAG,CAAC;AAClB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}