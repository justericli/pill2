import s from"react";import{FileStatus as e}from"../../types.mjs";import{storageManagerStateReducer as i}from"./reducer.mjs";import{addFilesAction as r,setUploadingFileAction as t,setUploadProgressAction as o,setUploadStatusAction as d,removeUploadAction as a}from"./actions.mjs";import{isObject as l}from"@aws-amplify/ui";const p=s=>(s=>!(!l(s)||!s.key))(s)?Object.assign(Object.assign({},s),{id:s.key,status:e.UPLOADED}):void 0;function m(l=[]){const[{files:m},u]=s.useReducer(i,{files:Array.isArray(l)?l.map(p).filter((s=>!!s)):[]});return{removeUpload:({id:s})=>{u(a({id:s}))},setUploadPaused:({id:s})=>{u(d({id:s,status:e.PAUSED}))},setUploadProgress:({progress:s,id:e})=>{u(o({id:e,progress:s}))},setUploadResumed:({id:s})=>{u(d({id:s,status:e.UPLOADING}))},setUploadSuccess:({id:s})=>{u(d({id:s,status:e.UPLOADED}))},setUploadingFile:({uploadTask:s,id:e})=>{u(t({id:e,uploadTask:s}))},addFiles:({files:s,getFileErrorMessage:e})=>{u(r({files:s,getFileErrorMessage:e}))},files:m}}export{m as useStorageManager};
